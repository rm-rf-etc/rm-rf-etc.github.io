!function e(t,n,r){function i(c,u){if(!n[c]){if(!t[c]){var a="function"==typeof require&&require;if(!u&&a)return a(c,!0);if(o)return o(c,!0);var l=new Error("Cannot find module '"+c+"'");throw l.code="MODULE_NOT_FOUND",l}var s=n[c]={exports:{}};t[c][0].call(s.exports,function(e){var n=t[c][1][e];return i(n?n:e)},s,s.exports,e,t,n,r)}return n[c].exports}for(var o="function"==typeof require&&require,c=0;c<r.length;c++)i(r[c]);return i}({1:[function(e,t,n){window.concise=e("concise")},{concise:2}],2:[function(e,t,n){!function(){function n(){this.ctrls=[],this.ctrls.active=null}function r(e,t,n){this.parent=e||{},this.el=t||null,this.validates=!1,n&&("Object"===typeOf(n)?this.dom=n:"Function"===typeOf(n)&&n(this))}function i(e){if(!familyOf(this.el))throw new Error("Missing valid view element. Cannot build a DOM before doing `$.view = document.querySelector(<your_selector>)`.");if("Object"!==typeOf(e))throw new Error("Invalid dom structure object.");this.el||console.log("No element above current element");for(var t in e)e.hasOwnProperty(t)&&o.call(this,t,e)}function o(e,t){var n,i,o;if(a(e)){if(n=u(e),this.validates=n.validate,o=n.el,i=t[e],!i)return void this.el.appendChild(o);n.helpers&&n.helpers.length?c.call(this,n,o,i):"String"===typeOf(i)?o.innerHTML=i:builder=new r(this,o,i),this.el.appendChild(o),this.parent&&this.parent.validates&&"FORM"===this.el.tagName&&this.formValidate()}}function c(e,t,n){var i,o,c,u;e.helpers.map(function(e){var a,l;if("Function"!==typeOf(n))throw new Error('DOM object "'+key+'" defined with helper method but has no function upon which to apply it.');c=d.helpers[e.split("(")[0]],o=/\((.+)\)/g.exec(e)[1],i=o.split(".").reduce(function(e,t){return a=e,l=t,e[t]},d.models),i||console.info('Alert! Expected model "'+o+'" not available for each() templating helper'),u=new r(this,t),this.el.appendChild(t),c(u,a,l,n)}.bind(this))}function u(e){var t,n,r,i,o=null,c="",u="",a=[],l=!0,s=[],f=!1,p=[],d=["validate"];if(/^[^\w]/g.test(e))throw new Error("Descriptor doesn't begin with a tag name: "+e);if(t=/^([^\s]+)(?:\s(.*))?$/g.exec(e),n=t[1],n&&/#/g.test(n)&&n.match(/#/g).length>1)throw new Error("HTML descriptor cannot contain multiple ids: "+n);if(n=n.match(/[#.]?\w[\w\d-]*/g),c=n[0],n.map(function(e){switch(e[0]){case"#":u=e.slice(1);break;case".":a[a.length]=e.slice(1)}}),o=document.createElement(c),a.length&&(o.className=a.join(" ")),u&&(o.id=u),t[2]){if(r=t[2],i=r.match(y),/\w+\(.*\)$/g.test(r)&&/\w+\((?:[^\w].*|.*[^\w])\)$/g.test(r))throw new Error("Invalid helper definition: "+r);f=-1!==i.indexOf("validate"),i.map(function(e,t){switch(!0){case/^[\w\d][\w\d-]*$/.test(e):l=/^[\w\d][\w\d-]*$/.exec(e),-1===d.indexOf(l[0])&&(s[s.length]=[l[0],!0]);break;case/^(\w[\w\d-.]*)=["'](.*)["']$/.test(e):var n;l=/^([\w\d-.]+)=["']((?:\"|\'|[^'"])*)["']$/.exec(e),n=l[1].split("."),n[n.length]=l[2],s[s.length]=n;break;case/^\w[\w\d]+\([^)]+\)$/.test(e):p||(p=[]),p[p.length]=e;break;default:throw new Error("Invalid token in HTML descriptor: "+e)}}),s.forEach(function(e){e.reduce(function(t,n){return e.indexOf(n)!==e.length-2?t[n]:void(t[n]=e.pop())},o)})}return{el:o,validate:f,helpers:p}}function a(e){return!0}function l(e){for(var t=new DocumentFragment;e.firstChild;)t.appendChild(e.firstChild);return t}var s="undefined"!=typeof s?s:window;s.familyOf=e("typeof").familyOf,s.typeOf=e("typeof").typeOf;var f=e("connected"),p=f.Bindable,d=new n,h=Object.defineProperty,g=e("microevent"),m=new g,v=e("runway/runway-browser.js");Object.keys(v).map(function(e){d[e]=v[e]}),n.prototype.setView=function(e){var t=this;t.ctrls.active!==e&&(t.ctrls.active&&(t.ctrls.active.builder.el=l(document.body)),t.ctrls.active=e,document.body.insertBefore(e.builder.el,document.body.firstChild))},n.prototype.get=function(e,t){var n=s.XMLHttpRequest||ActiveXObject,r=new n("MSXML2.XMLHTTP.3.0");r.onload=function(){if(r.status>=200&&r.status<400)try{t(JSON.parse(r.responseText))}catch(e){console.log(e)}else console.log("failed")},r.open("GET",e,1),r.send()},n.prototype.inject=function(e){var t=document.createElement("script");t.src=e,document.body.appendChild(t)},n.prototype.Controller=e("./internal/concise.controller.js")(d,h,m,r),n.prototype.Model=e("./internal/concise.model.js")(d,p),n.prototype.models=new p({}),n.prototype.helpers=e("./internal/concise.helpers.js"),n.prototype.Region=function(e){this.area=document.createElement("div"),this.changeTo=function(t){var n=e[t];n&&"DomBuilder"===typeOf(n)&&(this.area.firstChild&&this.area.removeChild(this.area.firstChild),this.area.appendChild(n.el.cloneNode(!0)))},e.map(function(t,n){if("Object"!==typeOf(t))throw new Error("Region received invalid view object. Expected plain JS object.");e[n]=new r(null,null,t)})},h(r.prototype,"dom",{enumerable:!1,configurable:!1,set:i}),h(r.prototype,"model",{enumerable:!1,configurable:!1,set:function(){},get:function(){return this._model||this.parent.model}}),r.prototype.onFocus=function(e){this.el.addEventListener("focus",e)},r.prototype.onBlur=function(e){this.el.addEventListener("blur",e)},r.prototype.onSubmit=function(e){this.el.addEventListener("submit",e)},r.prototype.onClick=function(e){this.el.addEventListener("click",e)},r.prototype.onInput=function(e){this.el.addEventListener("input",e)},r.prototype.setValid=function(e,t){this.el.setCustomValidity(e?"":t)},r.prototype.formValidate=function(){console.log("FORM VALIDATE",this),this._model=new p({});var e=this._model,t=["input","textarea"];e._new_property_=["_valid_",!1];for(var n=this.el.firstChild;n;)-1!=t.indexOf(n.tagName.toLowerCase())&&n.name&&(e._new_property_=[n.name,""],p.bindField(n,e)),n=n.nextSibling};var y="";y+="(\\w+[\\w-]*(?:\\.\\w+)*=['].*?['])(?=\\s[\\w\\d.]+(?:[=(]|$))|",y+='(\\w+[\\w-]*(?:\\.\\w+)*=["].*?["])(?=\\s[\\w\\d.]+(?:[=(]|$))|',y+="(\\w+[\\w-]*(?:\\.\\w+)*=['].*?['])$|",y+='(\\w+[\\w-]*(?:\\.\\w+)*=["].*?["])$|',y+="(\\w+[\\w-]*[(]\\w(?:[\\w\\d]+|[\\w\\d.][^.])*[)])$|",y+="([\\w\\d-]+)",y=new RegExp(y,"g"),"undefined"!=typeof t&&t.hasOwnProperty("exports")?t.exports=d:s.concise=d}()},{"./internal/concise.controller.js":3,"./internal/concise.helpers.js":5,"./internal/concise.model.js":6,connected:8,microevent:7,"runway/runway-browser.js":11,"typeof":13}],3:[function(e,t,n){t.exports=function(e,t,n,r){function i(t,i){var o=this;return e.ctrls.push(o),console.info("new controller:",t,o),o._id=t||Math.random().toString().split(".")[1],o.builder=new r(null),o.builder.el=new DocumentFragment,i.call(o),function(){n.trigger(o._id),e.setView(o)}}return i.prototype.onActive=function(e){n.bind(this._id,e)},t(i.prototype,"view",{enumerable:!1,configurable:!1,set:function(e){this.builder.dom="Function"===typeOf(e)?e(this):e}}),t(i.prototype,"models",{enumerable:!1,configurable:!1,get:function(){return e.models}}),i}},{}],4:[function(e,t,n){t.exports=function(e,t,n,r){function i(){Object.keys(t[n]).map(function(i){o.bind=function(e){return function(r){r.value=t[n][i][e],t[n][i].bind(e,function(e){r.value=e})}},"Function"===typeOf(r)?r.call(o,e,i,t[n][i]):"Object"===typeOf(r)&&(e.dom=r)})}var o=this;t.bind(n,function(t,n){for(;e.el.firstChild;)e.el.removeChild(e.el.firstChild);i()}),t[n]&&i()}},{}],5:[function(e,t,n){t.exports={each:e("./concise.helpers.each.js")}},{"./concise.helpers.each.js":4}],6:[function(e,t,n){t.exports=function(e,t){return function(n,r){return"Object"===typeOf(r)||"Array"===typeOf(r)?(e.models._new_property_=[n,new t(r)],e.models[n]):void 0}}},{}],7:[function(e,t,n){var r=function(){};r.prototype={bind:function(e,t){this._events=this._events||{},this._events[e]=this._events[e]||[],this._events[e].push(t)},unbind:function(e,t){this._events=this._events||{},e in this._events!=!1&&this._events[e].splice(this._events[e].indexOf(t),1)},trigger:function(e){if(this._events=this._events||{},e in this._events!=!1)for(var t=0;t<this._events[e].length;t++)this._events[e][t].apply(this,Array.prototype.slice.call(arguments,1))}},r.mixin=function(e){for(var t=["bind","unbind","trigger"],n=0;n<t.length;n++)e.prototype[t[n]]=r.prototype[t[n]]},"undefined"!=typeof t&&"exports"in t&&(t.exports=r)},{}],8:[function(e,t,n){!function(){function n(e){return"Array"===v(e)?new i(e):"complex"===m(e)?new r(e):void 0}function r(e){Object.keys(e).map(function(t){this._new_property_=[t,e[t]]}.bind(this))}function i(e){var t,n=[];return w(n,"_timeout",{enumerable:!1,configurable:!1,value:60}),w(n,"bind",{enumerable:!1,configurable:!1,value:a}),w(n,"unbind",{enumerable:!1,configurable:!1,value:l}),w(n,"trigger",{enumerable:!1,configurable:!1,value:u}),w(n,"recompute",{enumerable:!1,configurable:!1,value:s}),w(n,"fieldManager",{enumerable:!1,configurable:!1,value:d}),w(n,"accept_id",{enumerable:!1,configurable:!1,value:function(e){e===_&&(t=e().id)}}),w(n,"_new_property_",{enumerable:!1,configurable:!1,set:function(e){c.call(n,e)}}),b(n,"push",function(e){n._new_property_=[n.length,e],E(n._timeout,"push"+t,function(){x.trigger(t,[n.length-1,n[n.length-1]],"push"),console.log("emit: push"+t)})}),b(n,"pop",function(){var e=n[n.length-1];return n.length=n.length-1,E(n._timeout,"pop"+t,function(){x.trigger(t,e,"pop"),console.log("emit: pop"+t)}),e}),b(n,"shift",function(){var e=n[0];return Object.keys(n).map(function(e){n[+e]=n[+e+1],n[+e]=_({fetch:function(t){n[+e]=_({id:t})}})}),n.length=n.length-1,E(n._timeout,"shift"+t,function(){x.trigger(t,e,"shift"),console.log("emit: shift"+t)}),e}),b(n,"unshift",function(e){return Object.keys(n).reverse().map(function(e){console.log(+e+1,+e),n._new_property_=[+e+1,n[+e]],n[+e]=_({fetch:function(t){n[+e+1]=_({id:t})}})}),n._new_property_=[0,e],E(n._timeout,"unshift"+t,function(){x.trigger(t,n,"unshift"),console.log("emit: unshift"+t)}),n.length}),b(n,"splice",function(){E(n._timeout,"splice"+t,function(){x.trigger(t,n,"splice"),console.log("emit: splice"+t)}),Array.prototype.splice.apply(n,arguments)}),b(n,"slice",function(){Array.prototype.slice.apply(n,arguments),E(n._timeout,"slice"+t,function(){x.trigger(t,n,"slice"),console.log("emit: slice"+t)})}),b(n,"reverse",function(e,r){for(var i=0;i<Math.floor(n.length/2);i++){var c=n.length-1-i;o.call(n,i,c)}return Array.prototype.reverse.call(n),E(n._timeout,"reverse"+t,function(){x.trigger(t,n,"reverse"),console.log("emit: reverse"+t)}),n}),b(n,"concat",function(e){return n.trigger(_({id:t})),"Array"===v(e)&&e.length&&Object.keys(e).map(function(t){n._new_property_=[n.length,e[t]]}),E(n._timeout,"concat"+t,function(){x.trigger(t,n,"concat"),console.log("emit: concat"+t)}),n}),Object.keys(e).map(function(t){n._new_property_=[+t,e[+t]]}),n}function o(e,t){this[t]=_({fetch:function(n){this[e]=_({fetch:function(r){this[t]=_({id:r}),this[e]=_({id:n})}})}})}function c(e){var t,r,i,o,c=this;return r=+Math.random().toString().split(".")[1],"Array"!==v(e)?(console.log("Abort! Bad property assignment:",e),void console.trace()):(i=e[0],o=e[1],c.trigger("_id","_new_property_:"+i),w(this,i,{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){e===_&&_().fetch?_().fetch(r):e===_&&_().id?r=_().id:"complex"===m(e)?(t=new n(e),"Array"===v(e)&&t.accept_id(_({id:r})),x.trigger(r,t)):(t=e,x.trigger(r,t))}}),this[i]=o,void("Array"===v(o)&&this[i].accept_id(_({id:r}))))}function u(e){var t;e===_&&(t=_().id),e&&"_id"===e&&x.trigger(t)}function a(e,t){var n=this;n[e]=_({fetch:function(e){x.bind(e,t)}})}function l(e){x.unbind(e)}function s(e){return"complex"===m(e)&&this.constructor.apply(this,e),this}function f(e,t){[].forEach.call(e.querySelectorAll("input"),function(e){p(e,t)})}function p(e,t){if(e.name in t){var n=d();e.addEventListener("input",function(r){var i=function(){t[e.name]=r.target.value};n.input(i)}),t.bind(e.name,function(t){var r=function(){e.value=t};n.output(r)}),e.value=t[e.name]}}function d(){var e=!1;return{input:function(t){e=!0,t()},output:function(t){e?e=!1:t()}}}function h(e){var t=new n(e);return O.push(t),t}var g,m=e("typeof").familyOf,v=e("typeof").typeOf,y=e("microevent"),w=Object.defineProperty,b=function(e,t,n){w(e,t,{enumerable:!1,configurable:!1,value:n})},_=function(e){return e?(g=e,_):g},O=[],x=new y;w(r.prototype,"bind",{enumerable:!1,configurable:!1,value:a}),w(r.prototype,"unbind",{enumerable:!1,configurable:!1,value:l}),w(r.prototype,"trigger",{enumerable:!1,configurable:!1,value:u}),w(r.prototype,"recompute",{enumerable:!1,configurable:!1,value:s}),w(r.prototype,"fieldManager",{enumerable:!1,configurable:!1,value:d}),w(r.prototype,"onChange",{enumerable:!1,configurable:!1,value:function(e,t){var n=this;"Array"===v(e)&&e.forEach(function(e){n.bind(e,t)})}}),w(r.prototype,"_new_property_",{enumerable:!1,configurable:!1,set:function(e){c.call(this,e)}});var E;if(function(){var e={};E=function(t,n,r){clearTimeout(e[n]),e[n]=setTimeout(r,t)}}(),h.fieldManager=d,h.bindField=p,h.bindForm=f,h.unbind=l,h.bind=a,w(h,"bindables",{get:function(){return O},enumerable:!0}),w(h,"PROPERTY_MANIPULATOR",{value:_,writeable:!1}),"undefined"!=typeof t&&t.hasOwnProperty("exports")){var j={Bindable:h,familyOf:m,typeOf:v,unbind:l,bind:a};t.exports=j}else window.Connected=h,window.familyOf=m,window.typeOf=v}()},{microevent:9,"typeof":13}],9:[function(e,t,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],10:[function(e,t,n){arguments[4][7][0].apply(n,arguments)},{dup:7}],11:[function(e,t,n){function r(e,t){return console.log("processLink",e),e=e.replace(location.origin,""),"none"!==t?(o(e),i(e),!1):!0}function i(e){u=a.go(e),u&&u()}function o(e){history.pushState?history.pushState({url:e},null,e):location.assign(e)}function c(){history.replaceState({url:location.pathname},null,location.pathname)}var u,a=e("./runway.js");a.bind("route added",function(){var e=a.go(location.pathname);e&&e!==u&&(u=e)()}),t.exports=a;var l=["A","BUTTON"];document.onclick=function(e){e=e||window.event;var t=e.target||e.srcElement;-1!==l.indexOf(t.tagName)&&t.href&&(e.preventDefault(),r(t.href,t.dataset.ajax))},window.onpopstate=function(e){i(e.state.url)},window.addEventListener?addEventListener("load",c,!1):window.attachEvent?attachEvent("onload",c):onload=c},{"./runway.js":12}],12:[function(e,t,n){function r(e){this.routes=i,this.go=c,this.listener=o}function i(e,t,n){var r,o,c;if("Array"===d(e)&&e.length&&!t)return void e.map(function(e){i.apply(null,e)});if("string"!=typeof e)throw new Error("Router accepts only a string as the first argument.");if(o=e,n=arguments[arguments.length-1],t=Array.isArray(t)?t:[],"Function"!==d(n))throw new Error("Controller either not specified or invalid.");return t.forEach(function(e){if("Function"!==d(e))throw new Error("Filter is not a function: "+{}.toString.apply(e))}),r=[].concat(t).concat(n),p&&"Function"===d(p)&&p("add route:",o,"filters and controller:",r),o=o.replace(/(^\/|\/$)/g,"").split("/"),o[o.length]="$",c=u(o,r),l(h,c),m.trigger("route added"),i}function o(e,t){var n=c(e.url);n&&n(e,t)}function c(e){function t(e,t){return e?e[t]||function(){var i=e["<regex>"]||void 0;if(i)for(var o=0;o<i.patterns.length;o++)if(i.patterns[o].test(t))return n[r++]=t,i[i.patterns[o].toString()]}():null}if(!h)throw new Error("No routes defined.");var n=[],r=0,i=e.slice(1).replace(/\/$/g,"").split("?")[0].split("/");i[i.length]="$";var o,c=i.reduce(t,h);return o=c&&c[0]?function(e,t){c[0](e,t,n)}:null}function u(e,t){return e.reverse().reduce(a,t)}function a(e,t){var n=Object.create(null);if(/^\{.+\}$/g.test(t)){if(!g[t])throw new Error("Unknown wildcard used in route: "+t);var r=new RegExp(g[t]);return n["<regex>"]={patterns:[r]},n["<regex>"][r.toString()]=e,n}return n[t]=e,n}function l(e,t,n){Object.keys(t).map(function(n){switch(!0){case"<regex>"===n:Object.hasOwnProperty.call(e,n)?t[n].patterns.map(function(t){s(e[n].patterns,t)&&e[n].patterns.push(t)}):e[n]=t[n];break;case Object.hasOwnProperty.call(e,n):l(e[n],t[n]);break;default:e[n]=t[n]}})}function s(e,t){return e.reduce(function(e,n){return e||f(n,t)},!1)}function f(e,t){return e.toString()===t.toString()}var p,d=e("typeof").typeOf,h=Object.create(null),g={"{int}":"([1-9][0-9]*)","{any}":"([^/]*)","{a-z}":"([a-zA-Z]+)","{num}":"([0-9]+)"};e("microevent").mixin(r);var m=t.exports=new r},{microevent:10,"typeof":13}],13:[function(e,t,n){if("undefined"==typeof r)var r=function(){};t.exports=function(){function e(e){var n=t(e);return n?{Date:"simple",String:"simple",Number:"simple",Boolean:"simple",Function:"simple",RegExp:"simple",Array:"complex",Object:"complex",HTMLElement:"complex",undefined:"falsey","null":"falsey",NaN:"falsey"}[n]||"complex":!1}function t(e){return"number"==typeof e?isNaN(e)?"NaN":"Number":e instanceof r?"HTMLElement":null!==e&&void 0!==e&&e.constructor?n(e):""+e}function n(e){var t;if(!e.constructor||!e.constructor.toString)throw new Error("Object constructor does not have toString method.");return t=e.constructor.toString(),/function\s+(\w+)/.test(t)?t.match(/function\s+(\w+)/)[1]:"Anonymous Class"}return{getObjectClass:n,familyOf:e,typeOf:t}}()},{}]},{},[1]);
